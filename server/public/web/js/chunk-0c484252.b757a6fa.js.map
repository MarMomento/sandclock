{"version":3,"sources":["webpack:///./src/views/Tag/TagDetail.vue","webpack:///./src/views/Tag/TagDetail.vue?f375","webpack:///./src/views/Tag/TagDetail.vue?591d","webpack:///./src/components/Card/TagCard.vue","webpack:///./src/components/Card/TagCard.vue?3a3c","webpack:///./src/components/Card/TagCard.vue?257c","webpack:///./src/hooks/useTag.ts","webpack:///./src/hooks/useLoadMore.ts","webpack:///./src/components/LoadMore/index.vue","webpack:///./src/components/LoadMore/index.vue?64f2","webpack:///./src/components/LoadMore/index.vue?1a42","webpack:///./src/components/Tab/index.vue","webpack:///./src/components/Tab/index.vue?96a4","webpack:///./src/components/Tab/index.vue?77af","webpack:///./src/components/Tab/ArticleTab.vue?818e","webpack:///./node_modules/core-js/modules/es.symbol.description.js","webpack:///./src/components/Card/TagCard.vue?f204","webpack:///./src/components/Tab/ArticleTab.vue","webpack:///./src/components/Tab/ArticleTab.vue?856e","webpack:///./src/components/Tab/ArticleTab.vue?3f71"],"names":["class","tag","isDetail","followTag","isUnderTag","currentTab","tabs","articleList","getLatest","isLastPage","loadMore","articles_count","followers_count","name","components","TagCard","ArticleTab","LoadMore","setup","route","state","id","params","type","text","useLoadMore","date","page","per_page","count","pagination","data","concat","getTagById","useTag","followTheTag","isFollowing","getLatestArticles","render","header","style","color","avatar_url","src","description","title","to","_id","action","Card","props","Boolean","default","Object","required","emits","emit","store","user","value","info","following_tags","includes","__scopeId","router","isLogin","push","status","message","dispatch","FETCH_CURRENT_USER","paginationOptions","callback","Math","ceil","String","$","DESCRIPTORS","global","has","isObject","defineProperty","f","copyConstructorProperties","NativeSymbol","Symbol","prototype","undefined","EmptyStringDescriptionStore","SymbolWrapper","arguments","length","result","this","symbolPrototype","constructor","symbolToString","toString","native","regexp","configurable","get","symbol","valueOf","string","call","desc","slice","replace","forced","menu","tab","key","changeTab","content","article","i","showImg","collectTheArticle","Tab","ArticleCard","Array","useArticle"],"mappings":"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","file":"js/chunk-0c484252.b757a6fa.js","sourcesContent":["<template>\n  <div class=\"container tag-detail-page py-3\">\n    <div class=\"row mb-5\">\n      <div class=\"col-12\">\n        <TagCard\n          v-if=\"tag\"\n          :tag=\"tag\"\n          :isDetail=\"true\"\n          @follow-tag=\"followTag\"\n        />\n      </div>\n    </div>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-7\">\n        <ArticleTab\n          :isUnderTag=\"true\"\n          :currentTab=\"currentTab\"\n          :tabs=\"tabs\"\n          :articleList=\"articleList\"\n          @change-tab=\"getLatest\"\n        />\n\n        <LoadMore :isLastPage=\"isLastPage\" @load-more=\"loadMore\" />\n      </div>\n      <div class=\"col-2\">\n        <div class=\"d-flex flex-column\">\n          <div class=\"text-muted mb-2\">\n            已经发布 {{ tag && tag.articles_count }} 篇文章\n          </div>\n          <div class=\"text-muted\">\n            已经有 {{ tag && tag.followers_count }} 用户关注\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport TagCard from \"@/components/Card/TagCard.vue\";\nimport { useRoute } from \"vue-router\";\nimport {\n  defineComponent,\n  onActivated,\n  onMounted,\n  reactive,\n  ref,\n  toRefs,\n} from \"vue\";\nimport { fetchLatestArticlesByTagId, fetchTag } from \"@/api\";\nimport { IArticle, IArticleParams, ITag } from \"@/typings\";\nimport useTag from \"@/hooks/useTag\";\nimport ArticleTab from \"@/components/Tab/ArticleTab.vue\";\nimport LoadMore from \"@/components/LoadMore/index.vue\";\nimport useLoadMore from \"@/hooks/useLoadMore\";\n\nexport default defineComponent({\n  name: \"TagDetail\",\n  components: {\n    TagCard,\n    ArticleTab,\n    LoadMore,\n  },\n  setup() {\n    const route = useRoute();\n    const state = reactive({\n      id: ref(route.params.id as string),\n      currentTab: \"\",\n      tabs: [\n        {\n          type: \"week\",\n          text: \"最近一周\",\n        },\n        {\n          type: \"month\",\n          text: \"最近一月\",\n        },\n        {\n          type: \"year\",\n          text: \"最近一年\",\n        },\n      ],\n      articleList: [] as IArticle[],\n      tag: null as ITag | null,\n    });\n\n    const { pagination, isLastPage, loadMore } = useLoadMore(\n      {\n        date: 7,\n        page: 1,\n        per_page: 10,\n        count: 0,\n      },\n      async () => {\n        const { data } = await fetchLatestArticlesByTagId(state.id, {\n          date: pagination.date as number,\n          page: pagination.page + 1,\n          per_page: pagination.per_page,\n        });\n        state.articleList = state.articleList.concat(data.data);\n        pagination.count = data.count;\n      }\n    );\n\n    const getTagById = async () => {\n      const { data } = await fetchTag(state.id);\n      state.tag = data;\n    };\n\n    const { followTheTag } = useTag();\n\n    const followTag = async (isFollowing: boolean, tag: ITag) => {\n      await followTheTag(isFollowing, tag);\n      await getTagById();\n    };\n\n    const getLatestArticles = async (params: IArticleParams) => {\n      const { data } = await fetchLatestArticlesByTagId(state.id, params);\n      state.articleList = data.data;\n      pagination.count = data.count;\n    };\n\n    const getLatest = (type: string) => {\n      state.currentTab = type;\n      pagination.page = 1;\n      switch (type) {\n        case \"week\":\n          pagination.date = 7;\n          break;\n        case \"month\":\n          pagination.date = 30;\n          break;\n        case \"year\":\n          pagination.date = 365;\n          break;\n        default:\n          break;\n      }\n      getLatestArticles({\n        date: pagination.date as number,\n        page: pagination.page,\n        per_page: pagination.per_page,\n      });\n    };\n\n    onMounted(() => {\n      getTagById();\n      getLatest(\"week\");\n    });\n\n    onActivated(() => {\n      state.id = route.params.id as string;\n      getTagById();\n      getLatest(\"week\");\n    });\n\n    return {\n      ...toRefs(state),\n      followTag,\n      getLatest,\n      isLastPage,\n      loadMore,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport TagCard from \"@/components/Card/TagCard.vue\";\nimport { useRoute } from \"vue-router\";\nimport {\n  defineComponent,\n  onActivated,\n  onMounted,\n  reactive,\n  ref,\n  toRefs,\n} from \"vue\";\nimport { fetchLatestArticlesByTagId, fetchTag } from \"@/api\";\nimport { IArticle, IArticleParams, ITag } from \"@/typings\";\nimport useTag from \"@/hooks/useTag\";\nimport ArticleTab from \"@/components/Tab/ArticleTab.vue\";\nimport LoadMore from \"@/components/LoadMore/index.vue\";\nimport useLoadMore from \"@/hooks/useLoadMore\";\n\nexport default defineComponent({\n  name: \"TagDetail\",\n  components: {\n    TagCard,\n    ArticleTab,\n    LoadMore,\n  },\n  setup() {\n    const route = useRoute();\n    const state = reactive({\n      id: ref(route.params.id as string),\n      currentTab: \"\",\n      tabs: [\n        {\n          type: \"week\",\n          text: \"最近一周\",\n        },\n        {\n          type: \"month\",\n          text: \"最近一月\",\n        },\n        {\n          type: \"year\",\n          text: \"最近一年\",\n        },\n      ],\n      articleList: [] as IArticle[],\n      tag: null as ITag | null,\n    });\n\n    const { pagination, isLastPage, loadMore } = useLoadMore(\n      {\n        date: 7,\n        page: 1,\n        per_page: 10,\n        count: 0,\n      },\n      async () => {\n        const { data } = await fetchLatestArticlesByTagId(state.id, {\n          date: pagination.date as number,\n          page: pagination.page + 1,\n          per_page: pagination.per_page,\n        });\n        state.articleList = state.articleList.concat(data.data);\n        pagination.count = data.count;\n      }\n    );\n\n    const getTagById = async () => {\n      const { data } = await fetchTag(state.id);\n      state.tag = data;\n    };\n\n    const { followTheTag } = useTag();\n\n    const followTag = async (isFollowing: boolean, tag: ITag) => {\n      await followTheTag(isFollowing, tag);\n      await getTagById();\n    };\n\n    const getLatestArticles = async (params: IArticleParams) => {\n      const { data } = await fetchLatestArticlesByTagId(state.id, params);\n      state.articleList = data.data;\n      pagination.count = data.count;\n    };\n\n    const getLatest = (type: string) => {\n      state.currentTab = type;\n      pagination.page = 1;\n      switch (type) {\n        case \"week\":\n          pagination.date = 7;\n          break;\n        case \"month\":\n          pagination.date = 30;\n          break;\n        case \"year\":\n          pagination.date = 365;\n          break;\n        default:\n          break;\n      }\n      getLatestArticles({\n        date: pagination.date as number,\n        page: pagination.page,\n        per_page: pagination.per_page,\n      });\n    };\n\n    onMounted(() => {\n      getTagById();\n      getLatest(\"week\");\n    });\n\n    onActivated(() => {\n      state.id = route.params.id as string;\n      getTagById();\n      getLatest(\"week\");\n    });\n\n    return {\n      ...toRefs(state),\n      followTag,\n      getLatest,\n      isLastPage,\n      loadMore,\n    };\n  },\n});\n","import { render } from \"./TagDetail.vue?vue&type=template&id=eb0ec7b4\"\nimport script from \"./TagDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./TagDetail.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <!-- 标签列表卡片 -->\n  <Card class=\"tag-card\" v-if=\"!isDetail\">\n    <template v-slot:header>\n      <div class=\"tag-color-bar\" :style=\"{ backgroundColor: color }\"></div>\n    </template>\n\n    <template v-slot:title>\n      <img\n        class=\"tag-icon position-absolute end-0 bottom-0\"\n        v-if=\"tag.avatar_url\"\n        :src=\"tag.avatar_url\"\n      />\n      <h5 class=\"card-title fw-bolder tag-title\">\n        <router-link\n          class=\"text-decoration-none text-dark\"\n          :to=\"`/tag/${tag._id}`\"\n          >#{{ tag.name }}</router-link\n        >\n      </h5>\n    </template>\n\n    <template v-slot:text>\n      <p class=\"card-text\">\n        {{ tag.description }}\n      </p>\n    </template>\n\n    <template v-slot:action>\n      <div class=\"mt-auto\">\n        <p class=\"tag-detail text-muted\">\n          <small class=\"me-2\"> 已发表 {{ tag.articles_count }} 篇文章 </small>\n          <small> 已有 {{ tag.followers_count }} 人关注 </small>\n        </p>\n        <button\n          type=\"button\"\n          :class=\"[\n            'btn  px-4 mt-auto',\n            isFollowing ? 'btn-secondary' : 'btn-outline-secondary',\n          ]\"\n          @click=\"followTag(tag)\"\n        >\n          {{ isFollowing ? \"已关注\" : \"关注\" }}\n        </button>\n      </div>\n    </template>\n  </Card>\n\n  <!-- 标签详情卡片 -->\n  <Card class=\"tag-card tag-detail-card\" v-else>\n    <template v-slot:header>\n      <div class=\"tag-color-bar\" :style=\"{ backgroundColor: color }\"></div>\n    </template>\n\n    <template v-slot:text>\n      <div class=\"d-flex px-lg-4 py-lg-3\">\n        <img class=\"tag-icon\" v-if=\"tag.avatar_url\" :src=\"tag.avatar_url\" />\n        <div class=\"w-100 ms-4\">\n          <h5 class=\"card-title fw-bolder d-flex justify-content-between\">\n            <span class=\"text-dark fs-2\">#{{ tag.name }}</span>\n            <button\n              type=\"button\"\n              :class=\"[\n                'btn  px-4 mt-auto',\n                isFollowing ? 'btn-secondary' : 'btn-outline-secondary',\n              ]\"\n              @click=\"followTag(tag)\"\n            >\n              {{ isFollowing ? \"已关注\" : \"关注\" }}\n            </button>\n          </h5>\n          <p class=\"card-text col-12 col-md-8\">\n            {{ tag.description }}\n          </p>\n        </div>\n      </div>\n    </template>\n  </Card>\n</template>\n\n<script lang=\"ts\">\nimport { IState, ITag } from \"@/typings\";\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { randomHexColor } from \"@/libs/utils\";\nimport { useStore } from \"vuex\";\nimport Card from \"./index.vue\";\n\nexport default defineComponent({\n  name: \"TagCard\",\n  components: {\n    Card,\n  },\n  props: {\n    isDetail: {\n      type: Boolean,\n      default: false,\n    },\n    tag: {\n      type: Object as PropType<ITag>,\n      required: true,\n    },\n  },\n  emits: [\"follow-tag\"],\n  setup(props, { emit }) {\n    const color = randomHexColor();\n\n    const store = useStore<IState>();\n    const user = computed(() => store.state.user);\n    const isFollowing = computed(() => {\n      if (user.value.info) {\n        return user.value.info.following_tags.includes(props.tag._id);\n      } else {\n        return false;\n      }\n    });\n\n    const followTag = (tag: ITag) => {\n      emit(\"follow-tag\", isFollowing.value, tag);\n    };\n\n    return {\n      color,\n      isFollowing,\n      followTag,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.tag-card {\n  border-radius: $bd-radius-sm;\n  height: 100%;\n\n  .tag-color-bar {\n    height: 0.8rem;\n    border-radius: $bd-radius-sm $bd-radius-sm 0 0;\n  }\n\n  .tag-icon {\n    transform: rotate(-10deg);\n    width: 64px;\n    height: 64px;\n  }\n\n  .tag-title {\n    a:hover {\n      color: $blue !important;\n    }\n  }\n}\n</style>\n","\nimport { IState, ITag } from \"@/typings\";\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { randomHexColor } from \"@/libs/utils\";\nimport { useStore } from \"vuex\";\nimport Card from \"./index.vue\";\n\nexport default defineComponent({\n  name: \"TagCard\",\n  components: {\n    Card,\n  },\n  props: {\n    isDetail: {\n      type: Boolean,\n      default: false,\n    },\n    tag: {\n      type: Object as PropType<ITag>,\n      required: true,\n    },\n  },\n  emits: [\"follow-tag\"],\n  setup(props, { emit }) {\n    const color = randomHexColor();\n\n    const store = useStore<IState>();\n    const user = computed(() => store.state.user);\n    const isFollowing = computed(() => {\n      if (user.value.info) {\n        return user.value.info.following_tags.includes(props.tag._id);\n      } else {\n        return false;\n      }\n    });\n\n    const followTag = (tag: ITag) => {\n      emit(\"follow-tag\", isFollowing.value, tag);\n    };\n\n    return {\n      color,\n      isFollowing,\n      followTag,\n    };\n  },\n});\n","import { render } from \"./TagCard.vue?vue&type=template&id=02c11c35&scoped=true\"\nimport script from \"./TagCard.vue?vue&type=script&lang=ts\"\nexport * from \"./TagCard.vue?vue&type=script&lang=ts\"\n\nimport \"./TagCard.vue?vue&type=style&index=0&id=02c11c35&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-02c11c35\"\n\nexport default script","import { IState, ITag } from \"@/typings\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport $message from \"@/components/Message\";\nimport { ATS } from \"@/store/actionTypes\";\nimport { computed } from \"vue\";\nimport { followTag, unFollowTag } from \"@/api\";\n\ntype IUseTag = () => {\n  followTheTag: (isFollowing: boolean, tag: ITag) => void;\n};\n\nconst useTag: IUseTag = () => {\n  const router = useRouter();\n  const store = useStore<IState>();\n  const user = computed(() => store.state.user);\n\n  const followTheTag = async (isFollowing: boolean, tag: ITag) => {\n    if (!user.value.isLogin) {\n      router.push(\"/login\");\n      return;\n    }\n\n    try {\n      if (isFollowing) {\n        // unfollow\n        const { status } = await unFollowTag(tag._id);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"取消关注成功\",\n          });\n        }\n      } else {\n        // follow\n        const { status } = await followTag(tag._id);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"关注成功\",\n          });\n        }\n      }\n      store.dispatch(ATS.FETCH_CURRENT_USER);\n    } catch (error) {\n      //\n    }\n  };\n\n  return {\n    followTheTag,\n  };\n};\n\nexport default useTag;\n","import { computed, ComputedRef, reactive } from \"vue\";\n\ninterface IPaginationOptions {\n  page: number;\n  per_page: number;\n  count: number;\n  q?: string | ComputedRef<string>;\n  date?: number;\n}\n\ntype IUseLoadMore = (\n  paginationOptions: IPaginationOptions,\n  callback: () => Promise<void>\n) => {\n  pagination: IPaginationOptions;\n  isLastPage: ComputedRef<boolean>;\n  loadMore: () => Promise<void>;\n};\n\nconst useLoadMore: IUseLoadMore = (paginationOptions, callback) => {\n  const pagination = reactive(paginationOptions);\n\n  const isLastPage = computed(() => {\n    return pagination.page >= Math.ceil(pagination.count / pagination.per_page);\n  });\n\n  const loadMore = async () => {\n    await callback();\n    pagination.page++;\n  };\n\n  return {\n    pagination,\n    isLastPage,\n    loadMore,\n  };\n};\n\nexport default useLoadMore;\n","<template>\n  <div class=\"load-more d-flex justify-content-center my-2\">\n    <template v-if=\"isLastPage\">\n      <small class=\"text-muted\" v-if=\"isLastPage\">已经到底啦~~~</small>\n    </template>\n\n    <template v-else>\n      <button class=\"btn btn-primary\" @click=\"loadMore\">加载更多</button>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"LoadMore\",\n  props: {\n    isLastPage: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  emits: [\"load-more\"],\n  setup(props, { emit }) {\n    const loadMore = () => {\n      emit(\"load-more\");\n    };\n\n    return {\n      loadMore,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"LoadMore\",\n  props: {\n    isLastPage: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  emits: [\"load-more\"],\n  setup(props, { emit }) {\n    const loadMore = () => {\n      emit(\"load-more\");\n    };\n\n    return {\n      loadMore,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=f904e412\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div :class=\"['tab', { 'd-flex': type === 'leftRight' }]\">\n    <slot name=\"menu\"> </slot>\n    <slot name=\"content\"> </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\n\ntype ITabType = \"topBottom\" | \"leftRight\";\n\nexport default defineComponent({\n  name: \"Tab\",\n  props: {\n    type: {\n      type: String as PropType<ITabType>,\n      default: \"topBottom\",\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent, PropType } from \"vue\";\n\ntype ITabType = \"topBottom\" | \"leftRight\";\n\nexport default defineComponent({\n  name: \"Tab\",\n  props: {\n    type: {\n      type: String as PropType<ITabType>,\n      default: \"topBottom\",\n    },\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=723da21d\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ArticleTab.vue?vue&type=style&index=0&id=21d8d714&lang=scss&scoped=true\"","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TagCard.vue?vue&type=style&index=0&id=02c11c35&lang=scss&scoped=true\"","<template>\n  <Tab class=\"article-tab\">\n    <template v-slot:menu>\n      <div class=\"d-flex justify-content-between align-items-center mb-2\">\n        <div class=\"fw-bolder fs-5\">最新文章</div>\n        <ul class=\"nav nav-tabs article-tabs\">\n          <li class=\"nav-item\" v-for=\"tab of tabs\" :key=\"tab.type\">\n            <button\n              :class=\"['nav-link', { active: currentTab === tab.type }]\"\n              type=\"button\"\n              @click=\"changeTab(tab.type)\"\n            >\n              {{ tab.text }}\n            </button>\n          </li>\n        </ul>\n      </div>\n    </template>\n\n    <template v-slot:content>\n      <template v-for=\"(article, i) of articleList\" :key=\"article._id\">\n        <ArticleCard\n          :showImg=\"isUnderTag ? false : i === 0\"\n          :article=\"article\"\n          class=\"mb-3\"\n          @collect-article=\"collectTheArticle\"\n        ></ArticleCard>\n      </template>\n    </template>\n  </Tab>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport Tab from \"./index.vue\";\nimport ArticleCard from \"@/components/Card/ArticleCard.vue\";\nimport { IArticle, ITab } from \"@/typings\";\nimport useArticle from \"@/hooks/useArticle\";\n\nexport default defineComponent({\n  name: \"ArticleTab\",\n  components: {\n    Tab,\n    ArticleCard,\n  },\n  props: {\n    isUnderTag: {\n      type: Boolean,\n      default: false,\n    },\n    currentTab: {\n      type: String,\n      required: true,\n    },\n    tabs: {\n      type: Object as PropType<ITab[]>,\n      required: true,\n    },\n    articleList: {\n      type: Array as PropType<IArticle[]>,\n      required: true,\n    },\n  },\n  emits: [\"change-tab\"],\n  setup(props, { emit }) {\n    const { collectTheArticle } = useArticle();\n\n    const changeTab = (type: string) => {\n      if (props.currentTab === type) return;\n      emit(\"change-tab\", type);\n    };\n\n    return {\n      collectTheArticle,\n      changeTab,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.article-tabs {\n  border: none;\n\n  .nav-link {\n    padding-left: 0;\n    padding-right: 0;\n    padding-bottom: 0.2rem;\n    margin-left: 1rem;\n    border: none;\n    color: #000;\n\n    &.active {\n      border: none;\n      background-color: transparent;\n      color: $blue;\n      border-bottom: 3px solid $blue;\n      font-weight: bold;\n    }\n  }\n}\n</style>\n","\nimport { defineComponent, PropType } from \"vue\";\nimport Tab from \"./index.vue\";\nimport ArticleCard from \"@/components/Card/ArticleCard.vue\";\nimport { IArticle, ITab } from \"@/typings\";\nimport useArticle from \"@/hooks/useArticle\";\n\nexport default defineComponent({\n  name: \"ArticleTab\",\n  components: {\n    Tab,\n    ArticleCard,\n  },\n  props: {\n    isUnderTag: {\n      type: Boolean,\n      default: false,\n    },\n    currentTab: {\n      type: String,\n      required: true,\n    },\n    tabs: {\n      type: Object as PropType<ITab[]>,\n      required: true,\n    },\n    articleList: {\n      type: Array as PropType<IArticle[]>,\n      required: true,\n    },\n  },\n  emits: [\"change-tab\"],\n  setup(props, { emit }) {\n    const { collectTheArticle } = useArticle();\n\n    const changeTab = (type: string) => {\n      if (props.currentTab === type) return;\n      emit(\"change-tab\", type);\n    };\n\n    return {\n      collectTheArticle,\n      changeTab,\n    };\n  },\n});\n","import { render } from \"./ArticleTab.vue?vue&type=template&id=21d8d714&scoped=true\"\nimport script from \"./ArticleTab.vue?vue&type=script&lang=ts\"\nexport * from \"./ArticleTab.vue?vue&type=script&lang=ts\"\n\nimport \"./ArticleTab.vue?vue&type=style&index=0&id=21d8d714&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-21d8d714\"\n\nexport default script"],"sourceRoot":""}