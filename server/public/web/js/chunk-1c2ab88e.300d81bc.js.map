{"version":3,"sources":["webpack:///./src/hooks/useUser.ts","webpack:///./src/components/PreviewImage.vue","webpack:///./src/components/PreviewImage.vue?6914","webpack:///./src/components/PreviewImage.vue?1fbe","webpack:///./src/hooks/useRules.ts","webpack:///./src/views/Settings/index.vue","webpack:///./src/views/Settings/ProfileSetting.vue","webpack:///./src/views/Settings/ProfileSetting.vue?8d64","webpack:///./src/views/Settings/ProfileSetting.vue?4851","webpack:///./src/views/Settings/AccountSetting.vue","webpack:///./src/views/Settings/AccountSetting.vue?1d1c","webpack:///./src/views/Settings/AccountSetting.vue?0062","webpack:///./src/views/Settings/index.vue?e84e","webpack:///./src/views/Settings/index.vue?e42b","webpack:///./src/components/Tab/index.vue","webpack:///./src/components/Tab/index.vue?96a4","webpack:///./src/components/Tab/index.vue?77af","webpack:///./src/components/PreviewImage.vue?c6a8","webpack:///./node_modules/core-js/modules/es.symbol.description.js"],"names":["useUser","id","router","store","user","state","isMe","value","info","_id","isFollowing","get","following","includes","set","newVal","followTheUser","author","isLogin","push","status","type","message","dispatch","FETCH_CURRENT_USER","class","style","url","src","placeholder","name","props","String","required","width","default","height","render","__scopeId","useRules","nameRules","REQUIRED","passwordRules","againPwdRules","tagRules","RANGE","titleRules","contentRules","emailRules","EMAIL","searchRules","prefix","min","max","Number","MAX_SAFE_INTEGER","currentTab","text","menu","tabs","tab","key","content","currentTabComponent","ref","label","userInfo","nickName","email","description","rows","avatar_url","rules","checkImg","uploadSuccess","color","block","updateUserInfo","components","PreviewImage","setup","profileRef","file","indexOf","result","validate","resetPwdInfo","oldPassword","newPassword","againPassword","resetUserPwd","resetPwdRef","CUSTOM","Tab","ProfileSetting","AccountSetting","$","DESCRIPTORS","global","has","isObject","defineProperty","f","copyConstructorProperties","NativeSymbol","Symbol","prototype","undefined","EmptyStringDescriptionStore","SymbolWrapper","arguments","length","this","symbolPrototype","constructor","symbolToString","toString","native","regexp","configurable","symbol","valueOf","string","call","desc","slice","replace","forced"],"mappings":"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","file":"js/chunk-1c2ab88e.300d81bc.js","sourcesContent":["import { followUser, unFollowUser } from \"@/api\";\nimport $message from \"@/components/Message\";\nimport { ATS } from \"@/store/actionTypes\";\nimport { IState, IUser, IUserState } from \"@/typings\";\nimport { computed, ComputedRef, Ref, watch, WritableComputedRef } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\n\ntype IUseUser = (\n  user_id?: Ref<string> | undefined\n) => {\n  user: ComputedRef<IUserState>;\n  isMe: ComputedRef<boolean>;\n  isFollowing: WritableComputedRef<boolean>;\n  followTheUser: (isFollowing: boolean, author: IUser) => void;\n};\n\nconst useUser: IUseUser = (id: Ref<string> | undefined) => {\n  const router = useRouter();\n  const store = useStore<IState>();\n  const user = computed(() => store.state.user);\n  const isMe = computed(() => user.value.info?._id === id?.value);\n\n  const isFollowing = computed({\n    get: () => {\n      if (user.value.info) {\n        return user.value.info.following.includes(id ? id.value : \"\");\n      } else {\n        return false;\n      }\n    },\n    set: (newVal) => {\n      return newVal;\n    },\n  });\n\n  if (id) {\n    watch(id, (newVal) => {\n      if (user.value.info) {\n        isFollowing.value = user.value.info.following.includes(newVal);\n      } else {\n        isFollowing.value = false;\n      }\n    });\n  }\n\n  const followTheUser = async (isFollowing: boolean, author: IUser) => {\n    if (!user.value.isLogin) {\n      router.push(\"/login\");\n      return;\n    }\n\n    try {\n      if (isFollowing) {\n        // unFollow\n        const { status } = await unFollowUser(author._id);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"取消关注成功\",\n          });\n        }\n      } else {\n        // follow\n        const { status } = await followUser(author._id);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"关注成功\",\n          });\n        }\n      }\n      store.dispatch(ATS.FETCH_CURRENT_USER);\n    } catch (error) {\n      //\n    }\n  };\n\n  return {\n    user,\n    isMe,\n    isFollowing,\n    followTheUser,\n  };\n};\n\nexport default useUser;\n","<template>\n  <div class=\"preview-image\">\n    <div\n      class=\"preview-wrapper\"\n      :style=\"{\n        width,\n        height,\n      }\"\n    >\n      <v-img v-if=\"url\" :src=\"url\" class=\"image mw-100\" />\n      <div v-else class=\"placeholder\">{{ placeholder }}</div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"PreviewImage\",\n  props: {\n    url: {\n      type: String,\n      required: true,\n    },\n    width: {\n      type: String,\n      default: \"100px\",\n    },\n    height: {\n      type: String,\n      default: \"100px\",\n    },\n    placeholder: {\n      type: String,\n      default: \"预览图片\",\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.preview-image {\n  .preview-wrapper {\n    border: 2px dashed $gray-500;\n\n    .image {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n\n    .placeholder {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n      color: $gray-500;\n      font-size: 1.3rem;\n    }\n  }\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"PreviewImage\",\n  props: {\n    url: {\n      type: String,\n      required: true,\n    },\n    width: {\n      type: String,\n      default: \"100px\",\n    },\n    height: {\n      type: String,\n      default: \"100px\",\n    },\n    placeholder: {\n      type: String,\n      default: \"预览图片\",\n    },\n  },\n});\n","import { render } from \"./PreviewImage.vue?vue&type=template&id=6ec512a5&scoped=true\"\nimport script from \"./PreviewImage.vue?vue&type=script&lang=ts\"\nexport * from \"./PreviewImage.vue?vue&type=script&lang=ts\"\n\nimport \"./PreviewImage.vue?vue&type=style&index=0&id=6ec512a5&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6ec512a5\"\n\nexport default script","import { IRule, RULE_TYPE } from \"@/typings\";\n\n/**\n * 表单输入校验规则\n */\n\nconst useRules = () => {\n  const nameRules = [REQUIRED(\"用户名\")];\n  const passwordRules = [REQUIRED(\"密码\")];\n  const againPwdRules = [REQUIRED(\"密码\")];\n  const tagRules = [REQUIRED(\"标签\"), RANGE(1, 4)];\n  const titleRules = [REQUIRED(\"标题\")];\n  const contentRules = [REQUIRED(\"文章内容\")];\n  const emailRules = [\n    REQUIRED(\"邮箱\"),\n    { type: RULE_TYPE.EMAIL, message: \"请输入合法的邮箱\" },\n  ];\n  const searchRules = [REQUIRED(\"搜索内容\")];\n\n  function REQUIRED(prefix: string): IRule {\n    return {\n      type: RULE_TYPE.REQUIRED,\n      message: `${prefix}不能为空`,\n    };\n  }\n\n  function RANGE(min = 0, max = Number.MAX_SAFE_INTEGER): IRule {\n    return {\n      type: RULE_TYPE.RANGE,\n      message: `数量/长度只能在${min}-${max}`,\n      min,\n      max,\n    };\n  }\n\n  return {\n    nameRules,\n    passwordRules,\n    againPwdRules,\n    tagRules,\n    titleRules,\n    contentRules,\n    emailRules,\n    searchRules,\n  };\n};\n\nexport default useRules;\n","<template>\n  <div class=\"container settings-page py-3\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-12 col-lg-9\">\n        <h2 class=\"mb-4 fw-bold\">设置 >> {{ currentTab.text }}</h2>\n\n        <Tab type=\"leftRight\">\n          <template #menu>\n            <div class=\"col-3 me-3\">\n              <v-list-group class=\"side-menu\">\n                <v-list-item\n                  v-for=\"tab of tabs\"\n                  :key=\"tab.type\"\n                  :class=\"[\n                    'side-menu-item',\n                    { active: currentTab.type === tab.type },\n                  ]\"\n                  @click=\"currentTab = tab\"\n                >\n                  <span class=\"side-menu-link\">\n                    {{ tab.text }}\n                  </span>\n                </v-list-item>\n              </v-list-group>\n            </div>\n          </template>\n\n          <template #content>\n            <div class=\"col-9\">\n              <keep-alive>\n                <component :is=\"currentTabComponent\"></component>\n              </keep-alive>\n            </div>\n          </template>\n        </Tab>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, reactive, toRefs } from \"vue\";\nimport Tab from \"@/components/Tab/index.vue\";\nimport ProfileSetting from \"./ProfileSetting.vue\";\nimport AccountSetting from \"./AccountSetting.vue\";\n\nexport default defineComponent({\n  name: \"Settings\",\n  components: {\n    Tab,\n    ProfileSetting,\n    AccountSetting,\n  },\n  setup() {\n    const state = reactive({\n      currentTab: {\n        type: \"Profile\",\n        text: \"个人信息\",\n      },\n      tabs: [\n        {\n          type: \"Profile\",\n          text: \"个人信息\",\n        },\n        {\n          type: \"Account\",\n          text: \"账号信息\",\n        },\n      ],\n    });\n    const currentTabComponent = computed(() => {\n      return state.currentTab.type + \"Setting\";\n    });\n    return {\n      ...toRefs(state),\n      currentTabComponent,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","<template>\n  <div class=\"profile-setting\">\n    <v-form ref=\"profileRef\">\n      <v-card>\n        <v-card-body class=\"px-4\">\n          <v-card-title class=\"fs-4 fw-bold py-2\"> 基本信息 </v-card-title>\n\n          <v-card-text>\n            <v-form-item label=\"用户名\">\n              <v-input placeholder=\"请输入用户名\" v-model=\"userInfo.name\" />\n            </v-form-item>\n\n            <v-form-item label=\"用户昵称\" class=\"my-3\">\n              <v-input\n                placeholder=\"请输入用户昵称\"\n                v-model=\"userInfo.nickName\"\n              />\n            </v-form-item>\n\n            <v-form-item label=\"邮箱\" class=\"my-3\">\n              <v-input\n                type=\"email\"\n                placeholder=\"请输入邮箱\"\n                v-model=\"userInfo.email\"\n              />\n            </v-form-item>\n\n            <v-form-item label=\"个人简介\" class=\"mb-3\">\n              <v-textarea\n                placeholder=\"请输入个人简介\"\n                v-model=\"userInfo.description\"\n                rows=\"3\"\n              />\n            </v-form-item>\n\n            <v-form-item label=\"头像\" class=\"mb-3\">\n              <v-upload\n                placeholder=\"上传头像\"\n                v-model=\"userInfo.avatar_url\"\n                :rules=\"checkImg\"\n                @upload-success=\"uploadSuccess\"\n              />\n            </v-form-item>\n\n            <v-form-item label=\"头像预览\" class=\"mb-3\">\n              <preview-image :url=\"userInfo.avatar_url\" />\n            </v-form-item>\n          </v-card-text>\n        </v-card-body>\n      </v-card>\n\n      <v-card class=\"mt-3\">\n        <v-card-body>\n          <v-card-actions>\n            <v-btn color=\"primary\" block @click=\"updateUserInfo\">\n              保存信息\n            </v-btn>\n          </v-card-actions>\n        </v-card-body>\n      </v-card>\n    </v-form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, ref, toRefs } from \"vue\";\nimport useUser from \"@/hooks/useUser\";\nimport PreviewImage from \"@/components/PreviewImage.vue\";\nimport $message from \"@/components/Message\";\nimport useRules from \"@/hooks/useRules\";\nimport { useStore } from \"vuex\";\nimport { ATS } from \"@/store/actionTypes\";\nimport { updateUser } from \"@/api\";\n\nexport default defineComponent({\n  name: \"ProfileSetting\",\n  components: {\n    PreviewImage,\n  },\n  setup() {\n    const { user } = useUser();\n    const store = useStore();\n    const state = reactive({\n      userInfo: {\n        nickName: user.value.info?.nickName || \"\",\n        name: user.value.info?.name || \"\",\n        email: user.value.info?.email || \"\",\n        description: user.value.info?.description || \"\",\n        avatar_url: user.value.info?.avatar_url || \"\",\n      },\n      profileRef: ref<null | HTMLFormElement>(null),\n    });\n\n    const { nameRules, emailRules } = useRules();\n\n    const checkImg = (file: File): boolean => {\n      const type = file.type;\n      if (type.indexOf(\"image\") === -1) {\n        $message({\n          type: \"warn\",\n          message: \"请上传jpg,jpeg,png格式的文件\",\n        });\n        return false;\n      }\n      return true;\n    };\n\n    const uploadSuccess = () => {\n      $message({\n        type: \"success\",\n        message: \"图片上传成功\",\n      });\n    };\n\n    const updateUserInfo = async () => {\n      const result = state.profileRef?.validate();\n      if (!result) {\n        $message({\n          type: \"warn\",\n          message: \"请输入正确的数据\",\n        });\n        return;\n      }\n\n      try {\n        await updateUser(state.userInfo);\n        $message({\n          type: \"success\",\n          message: \"更新成功\",\n        });\n        store.dispatch(ATS.FETCH_CURRENT_USER);\n      } catch (error) {\n        //\n      }\n    };\n\n    return {\n      ...toRefs(state),\n      updateUserInfo,\n      nameRules,\n      emailRules,\n      checkImg,\n      uploadSuccess,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent, reactive, ref, toRefs } from \"vue\";\nimport useUser from \"@/hooks/useUser\";\nimport PreviewImage from \"@/components/PreviewImage.vue\";\nimport $message from \"@/components/Message\";\nimport useRules from \"@/hooks/useRules\";\nimport { useStore } from \"vuex\";\nimport { ATS } from \"@/store/actionTypes\";\nimport { updateUser } from \"@/api\";\n\nexport default defineComponent({\n  name: \"ProfileSetting\",\n  components: {\n    PreviewImage,\n  },\n  setup() {\n    const { user } = useUser();\n    const store = useStore();\n    const state = reactive({\n      userInfo: {\n        nickName: user.value.info?.nickName || \"\",\n        name: user.value.info?.name || \"\",\n        email: user.value.info?.email || \"\",\n        description: user.value.info?.description || \"\",\n        avatar_url: user.value.info?.avatar_url || \"\",\n      },\n      profileRef: ref<null | HTMLFormElement>(null),\n    });\n\n    const { nameRules, emailRules } = useRules();\n\n    const checkImg = (file: File): boolean => {\n      const type = file.type;\n      if (type.indexOf(\"image\") === -1) {\n        $message({\n          type: \"warn\",\n          message: \"请上传jpg,jpeg,png格式的文件\",\n        });\n        return false;\n      }\n      return true;\n    };\n\n    const uploadSuccess = () => {\n      $message({\n        type: \"success\",\n        message: \"图片上传成功\",\n      });\n    };\n\n    const updateUserInfo = async () => {\n      const result = state.profileRef?.validate();\n      if (!result) {\n        $message({\n          type: \"warn\",\n          message: \"请输入正确的数据\",\n        });\n        return;\n      }\n\n      try {\n        await updateUser(state.userInfo);\n        $message({\n          type: \"success\",\n          message: \"更新成功\",\n        });\n        store.dispatch(ATS.FETCH_CURRENT_USER);\n      } catch (error) {\n        //\n      }\n    };\n\n    return {\n      ...toRefs(state),\n      updateUserInfo,\n      nameRules,\n      emailRules,\n      checkImg,\n      uploadSuccess,\n    };\n  },\n});\n","import { render } from \"./ProfileSetting.vue?vue&type=template&id=51ab4716\"\nimport script from \"./ProfileSetting.vue?vue&type=script&lang=ts\"\nexport * from \"./ProfileSetting.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"account-setting\">\n    <v-card>\n      <v-card-body class=\"px-4\">\n        <v-card-title class=\"fs-4 fw-bold py-2\">重置密码</v-card-title>\n\n        <v-card-text>\n          <v-form ref=\"resetPwdRef\">\n            <v-form-item label=\"原密码\">\n              <v-input\n                type=\"password\"\n                placeholder=\"请输入原密码\"\n                v-model=\"resetPwdInfo.oldPassword\"\n                :rules=\"passwordRules\"\n              />\n            </v-form-item>\n\n            <v-form-item label=\"新密码\" class=\"my-3\">\n              <v-input\n                type=\"password\"\n                placeholder=\"请输入新密码\"\n                v-model=\"resetPwdInfo.newPassword\"\n                :rules=\"passwordRules\"\n              />\n            </v-form-item>\n\n            <v-form-item label=\"新密码\" class=\"mb-3\">\n              <v-input\n                type=\"password\"\n                placeholder=\"请再次输入新密码\"\n                v-model=\"resetPwdInfo.againPassword\"\n                :rules=\"againPwdRules\"\n              />\n            </v-form-item>\n\n            <v-btn color=\"primary\" class=\"mb-2\" @click=\"resetUserPwd\">\n              重置密码\n            </v-btn>\n          </v-form>\n        </v-card-text>\n      </v-card-body>\n    </v-card>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, ref, toRefs } from \"vue\";\nimport $message from \"@/components/Message\";\nimport useRules from \"@/hooks/useRules\";\nimport { resetPwd } from \"@/api\";\nimport { RULE_TYPE } from \"@/typings\";\n\nexport default defineComponent({\n  name: \"AccountSetting\",\n  setup() {\n    const state = reactive({\n      resetPwdInfo: {\n        oldPassword: \"\",\n        newPassword: \"\",\n        againPassword: \"\",\n      },\n      resetPwdRef: ref<null | HTMLFormElement>(null),\n    });\n\n    const { passwordRules, againPwdRules } = useRules();\n\n    againPwdRules.push({\n      type: RULE_TYPE.CUSTOM,\n      message: \"两次输入密码不一致\",\n      validate: () => {\n        return (\n          state.resetPwdInfo.newPassword === state.resetPwdInfo.againPassword\n        );\n      },\n    });\n\n    const resetUserPwd = async () => {\n      const result = state.resetPwdRef?.validate();\n      if (!result) {\n        $message({\n          type: \"warn\",\n          message: \"请输入正确的数据\",\n        });\n        return;\n      }\n\n      try {\n        const { status } = await resetPwd(state.resetPwdInfo);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"重置成功\",\n          });\n          state.resetPwdInfo = {\n            oldPassword: \"\",\n            newPassword: \"\",\n            againPassword: \"\",\n          };\n        }\n      } catch (error) {\n        //\n      }\n    };\n\n    return {\n      ...toRefs(state),\n      passwordRules,\n      againPwdRules,\n      resetUserPwd,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent, reactive, ref, toRefs } from \"vue\";\nimport $message from \"@/components/Message\";\nimport useRules from \"@/hooks/useRules\";\nimport { resetPwd } from \"@/api\";\nimport { RULE_TYPE } from \"@/typings\";\n\nexport default defineComponent({\n  name: \"AccountSetting\",\n  setup() {\n    const state = reactive({\n      resetPwdInfo: {\n        oldPassword: \"\",\n        newPassword: \"\",\n        againPassword: \"\",\n      },\n      resetPwdRef: ref<null | HTMLFormElement>(null),\n    });\n\n    const { passwordRules, againPwdRules } = useRules();\n\n    againPwdRules.push({\n      type: RULE_TYPE.CUSTOM,\n      message: \"两次输入密码不一致\",\n      validate: () => {\n        return (\n          state.resetPwdInfo.newPassword === state.resetPwdInfo.againPassword\n        );\n      },\n    });\n\n    const resetUserPwd = async () => {\n      const result = state.resetPwdRef?.validate();\n      if (!result) {\n        $message({\n          type: \"warn\",\n          message: \"请输入正确的数据\",\n        });\n        return;\n      }\n\n      try {\n        const { status } = await resetPwd(state.resetPwdInfo);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"重置成功\",\n          });\n          state.resetPwdInfo = {\n            oldPassword: \"\",\n            newPassword: \"\",\n            againPassword: \"\",\n          };\n        }\n      } catch (error) {\n        //\n      }\n    };\n\n    return {\n      ...toRefs(state),\n      passwordRules,\n      againPwdRules,\n      resetUserPwd,\n    };\n  },\n});\n","import { render } from \"./AccountSetting.vue?vue&type=template&id=03127222\"\nimport script from \"./AccountSetting.vue?vue&type=script&lang=ts\"\nexport * from \"./AccountSetting.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { computed, defineComponent, reactive, toRefs } from \"vue\";\nimport Tab from \"@/components/Tab/index.vue\";\nimport ProfileSetting from \"./ProfileSetting.vue\";\nimport AccountSetting from \"./AccountSetting.vue\";\n\nexport default defineComponent({\n  name: \"Settings\",\n  components: {\n    Tab,\n    ProfileSetting,\n    AccountSetting,\n  },\n  setup() {\n    const state = reactive({\n      currentTab: {\n        type: \"Profile\",\n        text: \"个人信息\",\n      },\n      tabs: [\n        {\n          type: \"Profile\",\n          text: \"个人信息\",\n        },\n        {\n          type: \"Account\",\n          text: \"账号信息\",\n        },\n      ],\n    });\n    const currentTabComponent = computed(() => {\n      return state.currentTab.type + \"Setting\";\n    });\n    return {\n      ...toRefs(state),\n      currentTabComponent,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=2a63b1ec\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div :class=\"['tab', { 'd-flex': type === 'leftRight' }]\">\n    <slot name=\"menu\"> </slot>\n    <slot name=\"content\"> </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\n\ntype ITabType = \"topBottom\" | \"leftRight\";\n\nexport default defineComponent({\n  name: \"Tab\",\n  props: {\n    type: {\n      type: String as PropType<ITabType>,\n      default: \"topBottom\",\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent, PropType } from \"vue\";\n\ntype ITabType = \"topBottom\" | \"leftRight\";\n\nexport default defineComponent({\n  name: \"Tab\",\n  props: {\n    type: {\n      type: String as PropType<ITabType>,\n      default: \"topBottom\",\n    },\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=723da21d\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PreviewImage.vue?vue&type=style&index=0&id=6ec512a5&lang=scss&scoped=true\"","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n"],"sourceRoot":""}