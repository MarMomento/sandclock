(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23fe091b"],{3853:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),i=Object(n["T"])("data-v-456f5604");Object(n["A"])("data-v-456f5604");var r={class:"container-fluid profile-page pb-4"},l={class:"row justify-content-center"},a={class:"col-12 col-lg-8"},o={class:"row mb-4"},s={class:"col-12"},u={class:"row"},b={class:"col-4"},j=Object(n["l"])("i",{class:"bi bi-vector-pen"},null,-1),O=Object(n["l"])("i",{class:"bi bi-stickies"},null,-1),f=Object(n["l"])("i",{class:"bi bi-tags"},null,-1),d=Object(n["l"])("i",{class:"bi bi-people"},null,-1),v=Object(n["l"])("i",{class:"bi bi-people-fill"},null,-1),m={class:"col-8"};Object(n["y"])();var p=i((function(t,e,c,p,w,x){var g=Object(n["F"])("UserProfileCard"),h=Object(n["F"])("List"),y=Object(n["F"])("ArticleCard"),k=Object(n["F"])("RecentCommentList");return Object(n["x"])(),Object(n["i"])("div",r,[Object(n["l"])("div",l,[Object(n["l"])("div",a,[Object(n["l"])("div",o,[Object(n["l"])("div",s,[t.user?(Object(n["x"])(),Object(n["i"])(g,{key:0,author:t.user,onFollowUser:t.followTheUser},null,8,["author","onFollowUser"])):Object(n["j"])("",!0)])]),Object(n["l"])("div",u,[Object(n["l"])("div",b,[t.user?(Object(n["x"])(),Object(n["i"])(h,{key:0,class:"avatar-intro p-3 text-muted border"},{list:i((function(){return[Object(n["l"])("div",null,[j,Object(n["k"])(" 发表了 "+Object(n["J"])(t.articleCount)+" 篇文章 ",1)]),Object(n["l"])("div",null,[O,Object(n["k"])(" 编写了 "+Object(n["J"])(t.commentCount)+" 条评论 ",1)]),Object(n["l"])("div",null,[f,Object(n["k"])(" 关注了 "+Object(n["J"])(t.user.following_tags&&t.user.following_tags.length)+" 个标签 ",1)]),Object(n["l"])("div",null,[d,Object(n["k"])(" 关注 "+Object(n["J"])(t.user.following_count)+" 个用户 ",1)]),Object(n["l"])("div",null,[v,Object(n["k"])(" 拥有 "+Object(n["J"])(t.user.followers_count)+" 个粉丝 ",1)])]})),_:1})):Object(n["j"])("",!0)]),Object(n["l"])("div",m,[t.articleList[0]?(Object(n["x"])(),Object(n["i"])(y,{key:0,showImg:!1,article:t.articleList[0],class:"mb-3",onCollectArticle:t.collectTheArticle},null,8,["article","onCollectArticle"])):Object(n["j"])("",!0),t.commentList?(Object(n["x"])(),Object(n["i"])(k,{key:1,commentList:t.commentList,class:"mb-3"},null,8,["commentList"])):Object(n["j"])("",!0),(Object(n["x"])(!0),Object(n["i"])(n["a"],null,Object(n["D"])(t.articleList,(function(e,c){return Object(n["x"])(),Object(n["i"])(n["a"],{key:e._id},[0!==c?(Object(n["x"])(),Object(n["i"])(y,{key:0,showImg:!1,article:e,class:"mb-3",onCollectArticle:t.collectTheArticle},null,8,["article","onCollectArticle"])):Object(n["j"])("",!0)],64)})),128))])])])])])})),w=c("5530"),x=c("1da1"),g=(c("96cf"),c("6c02")),h=c("79f6"),y=(c("a4d3"),c("e01a"),Object(n["T"])("data-v-f3ce08a4"));Object(n["A"])("data-v-f3ce08a4");var k={class:"avatar"},_={class:"text-center"},C={class:"avatar-name fs-2 fw-bolder"},L={class:"avatar-desc my-3"},J={class:"text-muted"},F=Object(n["l"])("i",{class:"bi bi-info-circle"},null,-1),U={class:"user-operate"},A=Object(n["k"])(" 编辑个人信息 ");Object(n["y"])();var T=y((function(t,e,i,r,l,a){var o=Object(n["F"])("router-link"),s=Object(n["F"])("Card");return Object(n["x"])(),Object(n["i"])(s,{class:"profile-card"},{header:y((function(){return[]})),title:y((function(){return[Object(n["l"])("div",k,[Object(n["l"])("img",{src:t.author.avatar_url||c("c121")},null,8,["src"])])]})),text:y((function(){return[Object(n["l"])("div",_,[Object(n["l"])("div",C,Object(n["J"])(t.author.nickName),1),Object(n["l"])("div",L,Object(n["J"])(t.author.description),1),Object(n["l"])("div",J,[Object(n["l"])("small",null,[F,Object(n["k"])(" 加入时间 "+Object(n["J"])(t.format(t.author.created_at)),1)])])])]})),action:y((function(){return[Object(n["l"])("div",U,[(t.user.info&&t.user.info._id)===t.author._id?(Object(n["x"])(),Object(n["i"])(o,{key:0,to:"/settings",class:"btn btn-primary px-3 py-2"},{default:y((function(){return[A]})),_:1})):(Object(n["x"])(),Object(n["i"])("button",{key:1,class:["btn px-3 py-2",t.isFollowing?"btn-primary":"btn-outline-primary"],type:"button",onClick:e[1]||(e[1]=function(e){return t.followUser(t.author)})},Object(n["J"])(t.isFollowing?"已关注":"关注"),3))])]})),_:1})})),P=c("38c8"),R=c("12f9"),E=c("7a10"),S=Object(n["m"])({name:"UserProfileCard",components:{Card:R["a"]},props:{author:{type:Object,required:!0}},emits:["follow-user"],setup:function(t,e){var c=e.emit,i=Object(n["C"])(t.author._id),r=Object(P["a"])(i),l=r.user,a=r.isFollowing,o=Object(E["a"])(),s=o.format,u=function(t){c("follow-user",a.value,t)};return Object(n["O"])((function(){return t.author}),(function(t){i.value=t._id})),{user:l,isFollowing:a,followUser:u,format:s}}});c("5e57");S.render=T,S.__scopeId="data-v-f3ce08a4";var N=S,I=c("7d5f"),$=(c("fb6a"),Object(n["l"])("div",{class:"fs-5 fw-bold py-2"},"最近的评论",-1)),D={class:"d-flex w-100 justify-content-between"},q={class:"mb-1 fw-bold"},B={class:"mb-1"},H={class:"d-flex w-100 justify-content-between"},K={class:"mb-1 fw-bold"},M={class:"mb-1"},z=Object(n["k"])(" 最近没有评论 ");function G(t,e,c,i,r,l){var a=Object(n["F"])("v-list-item"),o=Object(n["F"])("v-list-group");return Object(n["x"])(),Object(n["i"])(o,null,{default:Object(n["P"])((function(){return[Object(n["l"])(a,null,{default:Object(n["P"])((function(){return[$]})),_:1}),t.commentList.length?(Object(n["x"])(),Object(n["i"])(n["a"],{key:0},[t.isExpand?(Object(n["x"])(!0),Object(n["i"])(n["a"],{key:0},Object(n["D"])(t.commentList,(function(e){return Object(n["x"])(),Object(n["i"])(a,{key:e._id,action:""},{default:Object(n["P"])((function(){return[Object(n["l"])("div",D,[Object(n["l"])("span",q,Object(n["J"])(e.article_id&&e.article_id.title),1),Object(n["l"])("small",null,Object(n["J"])(t.fromNow(e.created_at)),1)]),Object(n["l"])("p",B,Object(n["J"])(e.content),1)]})),_:2},1024)})),128)):(Object(n["x"])(),Object(n["i"])(n["a"],{key:1},[(Object(n["x"])(!0),Object(n["i"])(n["a"],null,Object(n["D"])(t.commentList.slice(0,3),(function(e){return Object(n["x"])(),Object(n["i"])(a,{key:e._id,action:""},{default:Object(n["P"])((function(){return[Object(n["l"])("div",H,[Object(n["l"])("span",K,Object(n["J"])(e.article_id&&e.article_id.title),1),Object(n["l"])("small",null,Object(n["J"])(t.fromNow(e.created_at)),1)]),Object(n["l"])("p",M,Object(n["J"])(e.content),1)]})),_:2},1024)})),128)),Object(n["l"])(a,{class:"text-center text-muted"},{default:Object(n["P"])((function(){return[Object(n["l"])("a",{class:"text-link text-decoration-none",onClick:e[1]||(e[1]=function(e){return t.isExpand=!0})}," 查看所用的"+Object(n["J"])(t.commentList.length)+"评论 ",1)]})),_:1})],64))],64)):(Object(n["x"])(),Object(n["i"])(a,{key:1,class:"text-center text-muted"},{default:Object(n["P"])((function(){return[z]})),_:1}))]})),_:1})}var Q=Object(n["m"])({name:"RecentCommentList",props:{commentList:{type:Object,required:!0}},setup:function(t){var e,c=Object(E["a"])(),i=c.fromNow,r=Object(n["C"])(!((null===(e=t.commentList)||void 0===e?void 0:e.length)>3));return{fromNow:i,isExpand:r}}});Q.render=G;var V=Q,W=c("e3c1"),X=c("85bc"),Y=Object(n["m"])({name:"Profile",components:{UserProfileCard:N,List:I["a"],RecentCommentList:V,ArticleCard:W["a"]},setup:function(){var t=Object(g["d"])(),e=Object(n["C"])(t.params.id),c=Object(n["B"])({user:null,commentList:[],commentCount:0,articleList:[],articleCount:0}),i=Object(P["a"])(),r=i.followTheUser,l=Object(X["a"])(),a=l.collectTheArticle,o=function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["u"])(e.value);case 2:n=t.sent,i=n.data,c.user=i.user,c.commentList=i.commentList,c.commentCount=i.commentCount,c.articleList=i.articleList,c.articleCount=i.articleCount;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n["v"])((function(){o()})),Object(n["s"])((function(){e.value=t.params.id,o()})),Object(w["a"])(Object(w["a"])({},Object(n["K"])(c)),{},{followTheUser:r,collectTheArticle:a})}});c("f071");Y.render=p,Y.__scopeId="data-v-456f5604";e["default"]=Y},"38c8":function(t,e,c){"use strict";var n=c("1da1"),i=(c("96cf"),c("caad"),c("2532"),c("79f6")),r=c("565a"),l=c("0ef5"),a=c("7a23"),o=c("6c02"),s=c("5502"),u=function(t){var e=Object(o["e"])(),c=Object(s["b"])(),u=Object(a["g"])((function(){return c.state.user})),b=Object(a["g"])((function(){var e;return(null===(e=u.value.info)||void 0===e?void 0:e._id)===(null===t||void 0===t?void 0:t.value)})),j=Object(a["g"])({get:function(){return!!u.value.info&&u.value.info.following.includes(t?t.value:"")},set:function(t){return t}});t&&Object(a["O"])(t,(function(t){u.value.info?j.value=u.value.info.following.includes(t):j.value=!1}));var O=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(n,a){var o,s,b,j;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(u.value.isLogin){t.next=3;break}return e.push("/login"),t.abrupt("return");case 3:if(t.prev=3,!n){t.next=12;break}return t.next=7,Object(i["E"])(a._id);case 7:o=t.sent,s=o.status,204===s&&Object(r["a"])({type:"success",message:"取消关注成功"}),t.next=17;break;case 12:return t.next=14,Object(i["w"])(a._id);case 14:b=t.sent,j=b.status,204===j&&Object(r["a"])({type:"success",message:"关注成功"});case 17:c.dispatch(l["a"].FETCH_CURRENT_USER),t.next=22;break;case 20:t.prev=20,t.t0=t["catch"](3);case 22:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e,c){return t.apply(this,arguments)}}();return{user:u,isMe:b,isFollowing:j,followTheUser:O}};e["a"]=u},"416d":function(t,e,c){},"5e57":function(t,e,c){"use strict";c("838f")},"7d5f":function(t,e,c){"use strict";var n=c("7a23"),i={class:"list"},r={class:"list-body"};function l(t,e,c,l,a,o){return Object(n["x"])(),Object(n["i"])("div",i,[Object(n["E"])(t.$slots,"header"),Object(n["l"])("div",r,[Object(n["E"])(t.$slots,"list")])])}var a=Object(n["m"])({name:"List"});a.render=l;e["a"]=a},"838f":function(t,e,c){},e01a:function(t,e,c){"use strict";var n=c("23e7"),i=c("83ab"),r=c("da84"),l=c("5135"),a=c("861d"),o=c("9bf2").f,s=c("e893"),u=r.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var b={},j=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof j?new u(t):void 0===t?u():u(t);return""===t&&(b[e]=!0),e};s(j,u);var O=j.prototype=u.prototype;O.constructor=j;var f=O.toString,d="Symbol(test)"==String(u("test")),v=/^Symbol\((.*)\)[^)]+$/;o(O,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=f.call(t);if(l(b,t))return"";var c=d?e.slice(7,-1):e.replace(v,"$1");return""===c?void 0:c}}),n({global:!0,forced:!0},{Symbol:j})}},f071:function(t,e,c){"use strict";c("416d")}}]);
//# sourceMappingURL=chunk-23fe091b.5a3bd67c.js.map