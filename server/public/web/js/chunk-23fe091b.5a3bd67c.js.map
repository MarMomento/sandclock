{"version":3,"sources":["webpack:///./src/views/Profile/index.vue","webpack:///./src/components/Card/UserProfileCard.vue","webpack:///./src/components/Card/UserProfileCard.vue?04d0","webpack:///./src/components/Card/UserProfileCard.vue?35d9","webpack:///./src/components/List/RecentCommentList.vue","webpack:///./src/components/List/RecentCommentList.vue?add1","webpack:///./src/components/List/RecentCommentList.vue?9287","webpack:///./src/views/Profile/index.vue?833e","webpack:///./src/views/Profile/index.vue?d46a","webpack:///./src/hooks/useUser.ts","webpack:///./src/components/Card/UserProfileCard.vue?3529","webpack:///./src/components/List/index.vue","webpack:///./src/components/List/index.vue?52ec","webpack:///./src/components/List/index.vue?c9da","webpack:///./node_modules/core-js/modules/es.symbol.description.js","webpack:///./src/views/Profile/index.vue?8856"],"names":["class","user","author","followTheUser","list","articleCount","commentCount","following_tags","length","following_count","followers_count","articleList","showImg","article","collectTheArticle","commentList","i","_id","header","title","src","avatar_url","text","nickName","description","format","created_at","action","info","to","type","followUser","isFollowing","name","components","Card","props","Object","required","emits","setup","emit","id","useUser","useDayjs","value","newVal","render","__scopeId","isExpand","comment","key","article_id","fromNow","content","slice","UserProfileCard","List","RecentCommentList","ArticleCard","route","params","state","useArticle","getUserProfile","data","router","store","isMe","get","following","includes","set","isLogin","push","status","message","dispatch","FETCH_CURRENT_USER","$","DESCRIPTORS","global","has","isObject","defineProperty","f","copyConstructorProperties","NativeSymbol","Symbol","prototype","undefined","EmptyStringDescriptionStore","SymbolWrapper","arguments","String","result","this","symbolPrototype","constructor","symbolToString","toString","native","regexp","configurable","symbol","valueOf","string","call","desc","replace","forced"],"mappings":"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","file":"js/chunk-23fe091b.5a3bd67c.js","sourcesContent":["<template>\n  <div class=\"container-fluid profile-page pb-4\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-12 col-lg-8\">\n        <div class=\"row mb-4\">\n          <div class=\"col-12\">\n            <UserProfileCard\n              v-if=\"user\"\n              :author=\"user\"\n              @follow-user=\"followTheUser\"\n            />\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <List v-if=\"user\" class=\"avatar-intro p-3 text-muted border\">\n              <template v-slot:list>\n                <div>\n                  <i class=\"bi bi-vector-pen\"></i>\n                  发表了 {{ articleCount }} 篇文章\n                </div>\n                <div>\n                  <i class=\"bi bi-stickies\"></i>\n                  编写了 {{ commentCount }} 条评论\n                </div>\n                <div>\n                  <i class=\"bi bi-tags\"></i>\n                  关注了\n                  {{ user.following_tags && user.following_tags.length }}\n                  个标签\n                </div>\n                <div>\n                  <i class=\"bi bi-people\"></i>\n                  关注 {{ user.following_count }} 个用户\n                </div>\n                <div>\n                  <i class=\"bi bi-people-fill\"></i>\n                  拥有 {{ user.followers_count }} 个粉丝\n                </div>\n              </template>\n            </List>\n          </div>\n\n          <div class=\"col-8\">\n            <ArticleCard\n              v-if=\"articleList[0]\"\n              :showImg=\"false\"\n              :article=\"articleList[0]\"\n              class=\"mb-3\"\n              @collect-article=\"collectTheArticle\"\n            ></ArticleCard>\n\n            <RecentCommentList\n              v-if=\"commentList\"\n              :commentList=\"commentList\"\n              class=\"mb-3\"\n            />\n\n            <template v-for=\"(article, i) of articleList\" :key=\"article._id\">\n              <ArticleCard\n                v-if=\"i !== 0\"\n                :showImg=\"false\"\n                :article=\"article\"\n                class=\"mb-3\"\n                @collect-article=\"collectTheArticle\"\n              ></ArticleCard>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useRoute } from \"vue-router\";\nimport {\n  defineComponent,\n  onActivated,\n  onMounted,\n  reactive,\n  ref,\n  toRefs,\n} from \"vue\";\nimport { fetchUserProfile } from \"@/api\";\nimport { IArticle, IComment, IUser } from \"@/typings\";\nimport UserProfileCard from \"@/components/Card/UserProfileCard.vue\";\nimport useUser from \"@/hooks/useUser\";\nimport List from \"@/components/List/index.vue\";\nimport RecentCommentList from \"@/components/List/RecentCommentList.vue\";\nimport ArticleCard from \"@/components/Card/ArticleCard.vue\";\nimport useArticle from \"@/hooks/useArticle\";\n\nexport default defineComponent({\n  name: \"Profile\",\n  components: {\n    UserProfileCard,\n    List,\n    RecentCommentList,\n    ArticleCard,\n  },\n  setup() {\n    const route = useRoute();\n    const id = ref(route.params.id as string);\n    const state = reactive({\n      user: null as IUser | null,\n      commentList: [] as IComment[],\n      commentCount: 0,\n      articleList: [] as IArticle[],\n      articleCount: 0,\n    });\n\n    const { followTheUser } = useUser();\n    const { collectTheArticle } = useArticle();\n\n    const getUserProfile = async () => {\n      const { data } = await fetchUserProfile(id.value);\n      state.user = data.user;\n      state.commentList = data.commentList;\n      state.commentCount = data.commentCount;\n      state.articleList = data.articleList;\n      state.articleCount = data.articleCount;\n    };\n\n    onMounted(() => {\n      getUserProfile();\n    });\n\n    onActivated(() => {\n      id.value = route.params.id as string;\n      getUserProfile();\n    });\n\n    return {\n      ...toRefs(state),\n      followTheUser,\n      collectTheArticle,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.profile-page {\n  background: linear-gradient(\n    180deg,\n    #194085 0%,\n    #194085 150px,\n    rgba(0, 0, 0, 0) 150px\n  );\n\n  .avatar-intro {\n    background-color: #f9fafa;\n    border-radius: 8px;\n\n    div {\n      + div {\n        margin-top: 14px;\n      }\n\n      i {\n        margin-right: 10px;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <Card class=\"profile-card\">\n    <template v-slot:header> </template>\n\n    <template v-slot:title>\n      <div class=\"avatar\">\n        <img :src=\"author.avatar_url || require('@/assets/user.png')\" />\n      </div>\n    </template>\n\n    <template v-slot:text>\n      <div class=\"text-center\">\n        <div class=\"avatar-name fs-2 fw-bolder\">{{ author.nickName }}</div>\n        <div class=\"avatar-desc my-3\">\n          {{ author.description }}\n        </div>\n        <div class=\"text-muted\">\n          <small>\n            <i class=\"bi bi-info-circle\"></i> 加入时间\n            {{ format(author.created_at) }}</small\n          >\n        </div>\n      </div>\n    </template>\n\n    <template v-slot:action>\n      <div class=\"user-operate\">\n        <router-link\n          to=\"/settings\"\n          class=\"btn btn-primary px-3 py-2\"\n          v-if=\"(user.info && user.info._id) === author._id\"\n        >\n          编辑个人信息\n        </router-link>\n        <button\n          v-else\n          :class=\"[\n            'btn px-3 py-2',\n            isFollowing ? 'btn-primary' : 'btn-outline-primary',\n          ]\"\n          type=\"button\"\n          @click=\"followUser(author)\"\n        >\n          {{ isFollowing ? \"已关注\" : \"关注\" }}\n        </button>\n      </div>\n    </template>\n  </Card>\n</template>\n\n<script lang=\"ts\">\nimport useUser from \"@/hooks/useUser\";\nimport { IUser } from \"@/typings\";\nimport { defineComponent, PropType, ref, watch } from \"vue\";\nimport Card from \"./index.vue\";\nimport useDayjs from \"@/hooks/useDayjs\";\n\nexport default defineComponent({\n  name: \"UserProfileCard\",\n  components: {\n    Card,\n  },\n  props: {\n    author: {\n      type: Object as PropType<IUser>,\n      required: true,\n    },\n  },\n  emits: [\"follow-user\"],\n  setup(props, { emit }) {\n    const id = ref(props.author._id);\n    const { user, isFollowing } = useUser(id);\n    const { format } = useDayjs();\n\n    const followUser = (user: IUser) => {\n      emit(\"follow-user\", isFollowing.value, user);\n    };\n\n    watch(\n      () => props.author,\n      (newVal) => {\n        id.value = newVal._id;\n      }\n    );\n\n    return {\n      user,\n      isFollowing,\n      followUser,\n      format,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.profile-card {\n  margin-top: 80px;\n  padding-top: 66px !important;\n  border-radius: 8px;\n  position: relative;\n\n  .avatar {\n    width: 128px;\n    height: 128px;\n    background-color: #194085;\n    border-radius: 50%;\n    position: absolute;\n    top: -30%;\n    left: 50%;\n    margin-left: -64px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    img {\n      width: 110px;\n      height: 110px;\n      border-radius: 50%;\n    }\n  }\n\n  .user-operate {\n    position: absolute;\n    right: 1.5rem;\n    top: 1.5rem;\n  }\n}\n</style>\n","\nimport useUser from \"@/hooks/useUser\";\nimport { IUser } from \"@/typings\";\nimport { defineComponent, PropType, ref, watch } from \"vue\";\nimport Card from \"./index.vue\";\nimport useDayjs from \"@/hooks/useDayjs\";\n\nexport default defineComponent({\n  name: \"UserProfileCard\",\n  components: {\n    Card,\n  },\n  props: {\n    author: {\n      type: Object as PropType<IUser>,\n      required: true,\n    },\n  },\n  emits: [\"follow-user\"],\n  setup(props, { emit }) {\n    const id = ref(props.author._id);\n    const { user, isFollowing } = useUser(id);\n    const { format } = useDayjs();\n\n    const followUser = (user: IUser) => {\n      emit(\"follow-user\", isFollowing.value, user);\n    };\n\n    watch(\n      () => props.author,\n      (newVal) => {\n        id.value = newVal._id;\n      }\n    );\n\n    return {\n      user,\n      isFollowing,\n      followUser,\n      format,\n    };\n  },\n});\n","import { render } from \"./UserProfileCard.vue?vue&type=template&id=f3ce08a4&scoped=true\"\nimport script from \"./UserProfileCard.vue?vue&type=script&lang=ts\"\nexport * from \"./UserProfileCard.vue?vue&type=script&lang=ts\"\n\nimport \"./UserProfileCard.vue?vue&type=style&index=0&id=f3ce08a4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-f3ce08a4\"\n\nexport default script","<template>\n  <v-list-group>\n    <v-list-item>\n      <div class=\"fs-5 fw-bold py-2\">最近的评论</div>\n    </v-list-item>\n\n    <template v-if=\"commentList.length\">\n      <template v-if=\"isExpand\">\n        <v-list-item v-for=\"comment of commentList\" :key=\"comment._id\" action>\n          <div class=\"d-flex w-100 justify-content-between\">\n            <span class=\"mb-1 fw-bold\">{{\n              comment.article_id && comment.article_id.title\n            }}</span>\n            <small>{{ fromNow(comment.created_at) }}</small>\n          </div>\n          <p class=\"mb-1\">{{ comment.content }}</p>\n        </v-list-item>\n      </template>\n      <template v-else>\n        <v-list-item\n          v-for=\"comment of commentList.slice(0, 3)\"\n          :key=\"comment._id\"\n          action\n        >\n          <div class=\"d-flex w-100 justify-content-between\">\n            <span class=\"mb-1 fw-bold\">{{\n              comment.article_id && comment.article_id.title\n            }}</span>\n            <small>{{ fromNow(comment.created_at) }}</small>\n          </div>\n          <p class=\"mb-1\">{{ comment.content }}</p>\n        </v-list-item>\n        <v-list-item class=\"text-center text-muted\">\n          <a class=\"text-link text-decoration-none\" @click=\"isExpand = true\">\n            查看所用的{{ commentList.length }}评论\n          </a>\n        </v-list-item>\n      </template>\n    </template>\n\n    <template v-else>\n      <v-list-item class=\"text-center text-muted\"> 最近没有评论 </v-list-item>\n    </template>\n  </v-list-group>\n</template>\n\n<script lang=\"ts\">\nimport useDayjs from \"@/hooks/useDayjs\";\nimport { IComment } from \"@/typings\";\nimport { defineComponent, PropType, ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecentCommentList\",\n  props: {\n    commentList: {\n      type: Object as PropType<IComment[]>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const { fromNow } = useDayjs();\n\n    const isExpand = ref(props.commentList?.length > 3 ? false : true);\n\n    return {\n      fromNow,\n      isExpand,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport useDayjs from \"@/hooks/useDayjs\";\nimport { IComment } from \"@/typings\";\nimport { defineComponent, PropType, ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecentCommentList\",\n  props: {\n    commentList: {\n      type: Object as PropType<IComment[]>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const { fromNow } = useDayjs();\n\n    const isExpand = ref(props.commentList?.length > 3 ? false : true);\n\n    return {\n      fromNow,\n      isExpand,\n    };\n  },\n});\n","import { render } from \"./RecentCommentList.vue?vue&type=template&id=2a25a910\"\nimport script from \"./RecentCommentList.vue?vue&type=script&lang=ts\"\nexport * from \"./RecentCommentList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { useRoute } from \"vue-router\";\nimport {\n  defineComponent,\n  onActivated,\n  onMounted,\n  reactive,\n  ref,\n  toRefs,\n} from \"vue\";\nimport { fetchUserProfile } from \"@/api\";\nimport { IArticle, IComment, IUser } from \"@/typings\";\nimport UserProfileCard from \"@/components/Card/UserProfileCard.vue\";\nimport useUser from \"@/hooks/useUser\";\nimport List from \"@/components/List/index.vue\";\nimport RecentCommentList from \"@/components/List/RecentCommentList.vue\";\nimport ArticleCard from \"@/components/Card/ArticleCard.vue\";\nimport useArticle from \"@/hooks/useArticle\";\n\nexport default defineComponent({\n  name: \"Profile\",\n  components: {\n    UserProfileCard,\n    List,\n    RecentCommentList,\n    ArticleCard,\n  },\n  setup() {\n    const route = useRoute();\n    const id = ref(route.params.id as string);\n    const state = reactive({\n      user: null as IUser | null,\n      commentList: [] as IComment[],\n      commentCount: 0,\n      articleList: [] as IArticle[],\n      articleCount: 0,\n    });\n\n    const { followTheUser } = useUser();\n    const { collectTheArticle } = useArticle();\n\n    const getUserProfile = async () => {\n      const { data } = await fetchUserProfile(id.value);\n      state.user = data.user;\n      state.commentList = data.commentList;\n      state.commentCount = data.commentCount;\n      state.articleList = data.articleList;\n      state.articleCount = data.articleCount;\n    };\n\n    onMounted(() => {\n      getUserProfile();\n    });\n\n    onActivated(() => {\n      id.value = route.params.id as string;\n      getUserProfile();\n    });\n\n    return {\n      ...toRefs(state),\n      followTheUser,\n      collectTheArticle,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=456f5604&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=456f5604&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-456f5604\"\n\nexport default script","import { followUser, unFollowUser } from \"@/api\";\nimport $message from \"@/components/Message\";\nimport { ATS } from \"@/store/actionTypes\";\nimport { IState, IUser, IUserState } from \"@/typings\";\nimport { computed, ComputedRef, Ref, watch, WritableComputedRef } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\n\ntype IUseUser = (\n  user_id?: Ref<string> | undefined\n) => {\n  user: ComputedRef<IUserState>;\n  isMe: ComputedRef<boolean>;\n  isFollowing: WritableComputedRef<boolean>;\n  followTheUser: (isFollowing: boolean, author: IUser) => void;\n};\n\nconst useUser: IUseUser = (id: Ref<string> | undefined) => {\n  const router = useRouter();\n  const store = useStore<IState>();\n  const user = computed(() => store.state.user);\n  const isMe = computed(() => user.value.info?._id === id?.value);\n\n  const isFollowing = computed({\n    get: () => {\n      if (user.value.info) {\n        return user.value.info.following.includes(id ? id.value : \"\");\n      } else {\n        return false;\n      }\n    },\n    set: (newVal) => {\n      return newVal;\n    },\n  });\n\n  if (id) {\n    watch(id, (newVal) => {\n      if (user.value.info) {\n        isFollowing.value = user.value.info.following.includes(newVal);\n      } else {\n        isFollowing.value = false;\n      }\n    });\n  }\n\n  const followTheUser = async (isFollowing: boolean, author: IUser) => {\n    if (!user.value.isLogin) {\n      router.push(\"/login\");\n      return;\n    }\n\n    try {\n      if (isFollowing) {\n        // unFollow\n        const { status } = await unFollowUser(author._id);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"取消关注成功\",\n          });\n        }\n      } else {\n        // follow\n        const { status } = await followUser(author._id);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"关注成功\",\n          });\n        }\n      }\n      store.dispatch(ATS.FETCH_CURRENT_USER);\n    } catch (error) {\n      //\n    }\n  };\n\n  return {\n    user,\n    isMe,\n    isFollowing,\n    followTheUser,\n  };\n};\n\nexport default useUser;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserProfileCard.vue?vue&type=style&index=0&id=f3ce08a4&lang=scss&scoped=true\"","<template>\n  <div class=\"list\">\n    <slot name=\"header\"></slot>\n    <div class=\"list-body\">\n      <slot name=\"list\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"List\",\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"List\",\n});\n","import { render } from \"./index.vue?vue&type=template&id=31f1a623\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=456f5604&lang=scss&scoped=true\""],"sourceRoot":""}