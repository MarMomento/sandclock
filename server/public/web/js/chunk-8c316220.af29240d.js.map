{"version":3,"sources":["webpack:///./src/components/Card/LoginCard.vue?bde7","webpack:///./src/views/Home/index.vue","webpack:///./src/components/Card/LoginCard.vue","webpack:///./src/components/Card/LoginCard.vue?e013","webpack:///./src/components/Card/LoginCard.vue?c083","webpack:///./src/components/List/TagList.vue","webpack:///./src/components/List/TagList.vue?b36c","webpack:///./src/components/List/TagList.vue?7eba","webpack:///./src/components/Card/NotificationCard.vue","webpack:///./src/components/Card/NotificationCard.vue?267a","webpack:///./src/components/Card/NotificationCard.vue?3b16","webpack:///./src/views/Home/index.vue?7743","webpack:///./src/views/Home/index.vue?b56a","webpack:///./src/components/List/TagList.vue?84ea","webpack:///./src/hooks/useUser.ts","webpack:///./src/hooks/useLoadMore.ts","webpack:///./src/components/List/index.vue","webpack:///./src/components/List/index.vue?52ec","webpack:///./src/components/List/index.vue?c9da","webpack:///./src/components/LoadMore/index.vue","webpack:///./src/components/LoadMore/index.vue?64f2","webpack:///./src/components/LoadMore/index.vue?1a42","webpack:///./src/components/Tab/index.vue","webpack:///./src/components/Tab/index.vue?96a4","webpack:///./src/components/Tab/index.vue?77af","webpack:///./src/components/Tab/ArticleTab.vue?818e","webpack:///./src/components/Tab/ArticleTab.vue","webpack:///./src/components/Tab/ArticleTab.vue?856e","webpack:///./src/components/Tab/ArticleTab.vue?3f71"],"names":["class","user","isLogin","tagList","header","title","currentTab","tabs","articleList","getLatest","isLastPage","loadMore","text","action","to","name","components","Card","render","__scopeId","list","length","style","tag","key","_id","List","props","type","Array","required","setup","store","state","String","LoginCard","TagList","NotificationCard","ArticleTab","LoadMore","useUser","useLoadMore","date","page","per_page","count","pagination","data","concat","getPopularTags","slice","getFollowingTags","getLatestArticles","params","value","id","router","isMe","info","isFollowing","get","following","includes","set","newVal","followTheUser","author","push","status","message","dispatch","FETCH_CURRENT_USER","paginationOptions","callback","Math","ceil","Boolean","emits","emit","default","menu","tab","changeTab","content","article","i","showImg","isUnderTag","collectTheArticle","Tab","ArticleCard","Object","useArticle"],"mappings":"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","file":"js/chunk-8c316220.af29240d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LoginCard.vue?vue&type=style&index=0&id=67414dc0&lang=scss&scoped=true\"","<template>\n  <div class=\"container home-page py-3\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-lg-3 d-lg-block d-none\">\n        <LoginCard v-if=\"!user.isLogin\" class=\"mb-4\" />\n        <TagList :tagList=\"tagList\" class=\"mb-4\" />\n        <NotificationCard header=\"通知\">\n          <template v-slot:title>\n            <div>欢迎来到SandClock社区</div>\n          </template>\n        </NotificationCard>\n      </div>\n      <div class=\"col-12 col-lg-7\">\n        <ArticleTab\n          :currentTab=\"currentTab\"\n          :tabs=\"tabs\"\n          :articleList=\"articleList\"\n          @change-tab=\"getLatest\"\n        />\n\n        <LoadMore :isLastPage=\"isLastPage\" @load-more=\"loadMore\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  fetchFollowingTags,\n  fetchLatestArticles,\n  fetchPopularTags,\n} from \"@/api\";\nimport { IArticle, IArticleParams, ITag } from \"@/typings\";\nimport { defineComponent, onActivated, onMounted, reactive, toRefs } from \"vue\";\nimport LoginCard from \"@/components/Card/LoginCard.vue\";\nimport TagList from \"@/components/List/TagList.vue\";\nimport NotificationCard from \"@/components/Card/NotificationCard.vue\";\nimport LoadMore from \"@/components/LoadMore/index.vue\";\nimport ArticleTab from \"@/components/Tab/ArticleTab.vue\";\nimport useLoadMore from \"@/hooks/useLoadMore\";\nimport useUser from \"@/hooks/useUser\";\n\nexport default defineComponent({\n  name: \"Home\",\n  components: {\n    LoginCard,\n    TagList,\n    NotificationCard,\n    ArticleTab,\n    LoadMore,\n  },\n  setup() {\n    const { user } = useUser();\n    const state = reactive({\n      currentTab: \"\",\n      tabs: [\n        {\n          type: \"week\",\n          text: \"最近一周\",\n        },\n        {\n          type: \"month\",\n          text: \"最近一月\",\n        },\n        {\n          type: \"year\",\n          text: \"最近一年\",\n        },\n      ],\n      articleList: [] as IArticle[],\n      tagList: [] as ITag[],\n    });\n\n    const { pagination, isLastPage, loadMore } = useLoadMore(\n      {\n        date: 7,\n        page: 1,\n        per_page: 15,\n        count: 0,\n      },\n      async () => {\n        const { data } = await fetchLatestArticles({\n          date: pagination.date as number,\n          page: pagination.page + 1,\n          per_page: pagination.per_page,\n        });\n        state.articleList = state.articleList.concat(data.data);\n        pagination.count = data.count;\n      }\n    );\n\n    const getPopularTags = async () => {\n      const { data } = await fetchPopularTags();\n      state.tagList = data.slice(0, 15);\n    };\n\n    const getFollowingTags = async () => {\n      const { data } = await fetchFollowingTags();\n      state.tagList = data;\n    };\n\n    const getLatestArticles = async (params: IArticleParams) => {\n      const { data } = await fetchLatestArticles(params);\n      state.articleList = data.data;\n      pagination.count = data.count;\n    };\n\n    const getLatest = (type: string) => {\n      state.currentTab = type;\n      pagination.page = 1;\n      switch (type) {\n        case \"week\":\n          pagination.date = 7;\n          break;\n        case \"month\":\n          pagination.date = 30;\n          break;\n        case \"year\":\n          pagination.date = 365;\n          break;\n        default:\n          break;\n      }\n      getLatestArticles({\n        date: pagination.date as number,\n        page: pagination.page,\n        per_page: pagination.per_page,\n      });\n    };\n\n    onMounted(async () => {\n      if (user.value.isLogin) {\n        getFollowingTags();\n      } else {\n        getPopularTags();\n      }\n      getLatest(\"week\");\n    });\n\n    onActivated(() => {\n      if (user.value.isLogin) {\n        getFollowingTags();\n      } else {\n        getPopularTags();\n      }\n      getLatest(\"week\");\n    });\n\n    return {\n      user,\n      ...toRefs(state),\n      isLastPage,\n      loadMore,\n      getLatest,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","<template>\n  <Card class=\"login-card\">\n    <template v-slot:title>\n      <h5 class=\"card-title\">\n        SandClock Community is a community of many amazing developers\n      </h5>\n    </template>\n\n    <template v-slot:text>\n      <p class=\"card-text text-muted\">\n        We're a place where coders share, stay up-to-date and grow their\n        careers.\n      </p>\n    </template>\n\n    <template v-slot:action>\n      <div class=\"d-grid gap-2 col-12\">\n        <router-link to=\"/login?state=new-user\" class=\"btn btn-primary\">\n          注册账号\n        </router-link>\n        <router-link\n          to=\"/login\"\n          class=\"btn btn-link text-decoration-none go-login\"\n        >\n          登录\n        </router-link>\n      </div>\n    </template>\n  </Card>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport Card from \"./index.vue\";\n\nexport default defineComponent({\n  name: \"LoginCard\",\n  components: {\n    Card,\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.login-card {\n  .go-login {\n    &:hover {\n      background-color: $gray-200;\n    }\n  }\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\nimport Card from \"./index.vue\";\n\nexport default defineComponent({\n  name: \"LoginCard\",\n  components: {\n    Card,\n  },\n});\n","import { render } from \"./LoginCard.vue?vue&type=template&id=67414dc0&scoped=true\"\nimport script from \"./LoginCard.vue?vue&type=script&lang=ts\"\nexport * from \"./LoginCard.vue?vue&type=script&lang=ts\"\n\nimport \"./LoginCard.vue?vue&type=style&index=0&id=67414dc0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-67414dc0\"\n\nexport default script","<template>\n  <List class=\"tag-list\">\n    <template v-slot:header>\n      <template v-if=\"user.isLogin\">\n        <p\n          class=\"fw-bolder fs-5 d-flex justify-content-between align-items-center\"\n        >\n          我的标签\n          <router-link to=\"/dashboard/following-tags\">\n            <i class=\"bi bi-nut text-muted fs-4\"></i>\n          </router-link>\n        </p>\n      </template>\n\n      <template v-else>\n        <p class=\"fw-bolder fs-5\">最近热门标签</p>\n      </template>\n    </template>\n\n    <template v-slot:list>\n      <template v-if=\"tagList.length\">\n        <div class=\"tag-group-wrapper\">\n          <ul\n            class=\"list-group tag-group\"\n            :style=\"{\n              maxHeight: 8 * 40 + 'px',\n              overflowY: tagList.length > 8 ? 'scroll' : '',\n            }\"\n          >\n            <li\n              class=\"list-group-item tag-item\"\n              v-for=\"tag of tagList\"\n              :key=\"tag._id\"\n            >\n              <router-link\n                class=\"link-dark text-decoration-none tag-link d-block\"\n                :to=\"`/tag/${tag._id}`\"\n              >\n                #{{ tag.name }}\n              </router-link>\n            </li>\n          </ul>\n        </div>\n      </template>\n\n      <template v-else>\n        <div class=\"text-muted\">\n          <small>暂时没有关注的标签</small>\n        </div>\n      </template>\n    </template>\n  </List>\n</template>\n\n<script lang=\"ts\">\nimport { IState, ITag } from \"@/typings\";\nimport { useStore } from \"vuex\";\nimport { computed, defineComponent, PropType } from \"vue\";\nimport List from \"./index.vue\";\n\nexport default defineComponent({\n  name: \"TagList\",\n  components: {\n    List,\n  },\n  props: {\n    tagList: {\n      type: Array as PropType<ITag[]>,\n      required: true,\n    },\n  },\n  setup() {\n    const store = useStore<IState>();\n    const user = computed(() => store.state.user);\n\n    return {\n      user,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.tag-list {\n  .tag-group-wrapper {\n    overflow-x: hidden;\n\n    .tag-group {\n      width: calc(100% + 12px);\n\n      &::-webkit-scrollbar {\n        background: $gray-200;\n      }\n\n      &::-webkit-scrollbar-thumb {\n        background-color: $gray-500;\n      }\n    }\n\n    .tag-item {\n      border: none;\n      border-radius: 0.25rem;\n      background-color: inherit;\n\n      &:hover {\n        background-color: $gray-100;\n\n        .tag-link {\n          color: $blue;\n        }\n      }\n    }\n  }\n}\n</style>\n","\nimport { IState, ITag } from \"@/typings\";\nimport { useStore } from \"vuex\";\nimport { computed, defineComponent, PropType } from \"vue\";\nimport List from \"./index.vue\";\n\nexport default defineComponent({\n  name: \"TagList\",\n  components: {\n    List,\n  },\n  props: {\n    tagList: {\n      type: Array as PropType<ITag[]>,\n      required: true,\n    },\n  },\n  setup() {\n    const store = useStore<IState>();\n    const user = computed(() => store.state.user);\n\n    return {\n      user,\n    };\n  },\n});\n","import { render } from \"./TagList.vue?vue&type=template&id=4653b0dc&scoped=true\"\nimport script from \"./TagList.vue?vue&type=script&lang=ts\"\nexport * from \"./TagList.vue?vue&type=script&lang=ts\"\n\nimport \"./TagList.vue?vue&type=style&index=0&id=4653b0dc&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4653b0dc\"\n\nexport default script","<template>\n  <Card class=\"notification-card\">\n    <template v-slot:header>\n      <slot name=\"header\">\n        <div class=\"card-header\" v-if=\"header\">{{ header }}</div>\n      </slot>\n    </template>\n\n    <template v-slot:title>\n      <slot name=\"title\"></slot>\n    </template>\n\n    <template v-slot:text>\n      <slot name=\"text\"></slot>\n    </template>\n  </Card>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport Card from \"./index.vue\";\n\nexport default defineComponent({\n  name: \"NotificationCard\",\n  components: {\n    Card,\n  },\n  props: {\n    header: String,\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent } from \"vue\";\nimport Card from \"./index.vue\";\n\nexport default defineComponent({\n  name: \"NotificationCard\",\n  components: {\n    Card,\n  },\n  props: {\n    header: String,\n  },\n});\n","import { render } from \"./NotificationCard.vue?vue&type=template&id=6a8b6dee\"\nimport script from \"./NotificationCard.vue?vue&type=script&lang=ts\"\nexport * from \"./NotificationCard.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport {\n  fetchFollowingTags,\n  fetchLatestArticles,\n  fetchPopularTags,\n} from \"@/api\";\nimport { IArticle, IArticleParams, ITag } from \"@/typings\";\nimport { defineComponent, onActivated, onMounted, reactive, toRefs } from \"vue\";\nimport LoginCard from \"@/components/Card/LoginCard.vue\";\nimport TagList from \"@/components/List/TagList.vue\";\nimport NotificationCard from \"@/components/Card/NotificationCard.vue\";\nimport LoadMore from \"@/components/LoadMore/index.vue\";\nimport ArticleTab from \"@/components/Tab/ArticleTab.vue\";\nimport useLoadMore from \"@/hooks/useLoadMore\";\nimport useUser from \"@/hooks/useUser\";\n\nexport default defineComponent({\n  name: \"Home\",\n  components: {\n    LoginCard,\n    TagList,\n    NotificationCard,\n    ArticleTab,\n    LoadMore,\n  },\n  setup() {\n    const { user } = useUser();\n    const state = reactive({\n      currentTab: \"\",\n      tabs: [\n        {\n          type: \"week\",\n          text: \"最近一周\",\n        },\n        {\n          type: \"month\",\n          text: \"最近一月\",\n        },\n        {\n          type: \"year\",\n          text: \"最近一年\",\n        },\n      ],\n      articleList: [] as IArticle[],\n      tagList: [] as ITag[],\n    });\n\n    const { pagination, isLastPage, loadMore } = useLoadMore(\n      {\n        date: 7,\n        page: 1,\n        per_page: 15,\n        count: 0,\n      },\n      async () => {\n        const { data } = await fetchLatestArticles({\n          date: pagination.date as number,\n          page: pagination.page + 1,\n          per_page: pagination.per_page,\n        });\n        state.articleList = state.articleList.concat(data.data);\n        pagination.count = data.count;\n      }\n    );\n\n    const getPopularTags = async () => {\n      const { data } = await fetchPopularTags();\n      state.tagList = data.slice(0, 15);\n    };\n\n    const getFollowingTags = async () => {\n      const { data } = await fetchFollowingTags();\n      state.tagList = data;\n    };\n\n    const getLatestArticles = async (params: IArticleParams) => {\n      const { data } = await fetchLatestArticles(params);\n      state.articleList = data.data;\n      pagination.count = data.count;\n    };\n\n    const getLatest = (type: string) => {\n      state.currentTab = type;\n      pagination.page = 1;\n      switch (type) {\n        case \"week\":\n          pagination.date = 7;\n          break;\n        case \"month\":\n          pagination.date = 30;\n          break;\n        case \"year\":\n          pagination.date = 365;\n          break;\n        default:\n          break;\n      }\n      getLatestArticles({\n        date: pagination.date as number,\n        page: pagination.page,\n        per_page: pagination.per_page,\n      });\n    };\n\n    onMounted(async () => {\n      if (user.value.isLogin) {\n        getFollowingTags();\n      } else {\n        getPopularTags();\n      }\n      getLatest(\"week\");\n    });\n\n    onActivated(() => {\n      if (user.value.isLogin) {\n        getFollowingTags();\n      } else {\n        getPopularTags();\n      }\n      getLatest(\"week\");\n    });\n\n    return {\n      user,\n      ...toRefs(state),\n      isLastPage,\n      loadMore,\n      getLatest,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=3a3a1ce3\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TagList.vue?vue&type=style&index=0&id=4653b0dc&lang=scss&scoped=true\"","import { followUser, unFollowUser } from \"@/api\";\nimport $message from \"@/components/Message\";\nimport { ATS } from \"@/store/actionTypes\";\nimport { IState, IUser, IUserState } from \"@/typings\";\nimport { computed, ComputedRef, Ref, watch, WritableComputedRef } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\n\ntype IUseUser = (\n  user_id?: Ref<string> | undefined\n) => {\n  user: ComputedRef<IUserState>;\n  isMe: ComputedRef<boolean>;\n  isFollowing: WritableComputedRef<boolean>;\n  followTheUser: (isFollowing: boolean, author: IUser) => void;\n};\n\nconst useUser: IUseUser = (id: Ref<string> | undefined) => {\n  const router = useRouter();\n  const store = useStore<IState>();\n  const user = computed(() => store.state.user);\n  const isMe = computed(() => user.value.info?._id === id?.value);\n\n  const isFollowing = computed({\n    get: () => {\n      if (user.value.info) {\n        return user.value.info.following.includes(id ? id.value : \"\");\n      } else {\n        return false;\n      }\n    },\n    set: (newVal) => {\n      return newVal;\n    },\n  });\n\n  if (id) {\n    watch(id, (newVal) => {\n      if (user.value.info) {\n        isFollowing.value = user.value.info.following.includes(newVal);\n      } else {\n        isFollowing.value = false;\n      }\n    });\n  }\n\n  const followTheUser = async (isFollowing: boolean, author: IUser) => {\n    if (!user.value.isLogin) {\n      router.push(\"/login\");\n      return;\n    }\n\n    try {\n      if (isFollowing) {\n        // unFollow\n        const { status } = await unFollowUser(author._id);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"取消关注成功\",\n          });\n        }\n      } else {\n        // follow\n        const { status } = await followUser(author._id);\n        if (status === 204) {\n          $message({\n            type: \"success\",\n            message: \"关注成功\",\n          });\n        }\n      }\n      store.dispatch(ATS.FETCH_CURRENT_USER);\n    } catch (error) {\n      //\n    }\n  };\n\n  return {\n    user,\n    isMe,\n    isFollowing,\n    followTheUser,\n  };\n};\n\nexport default useUser;\n","import { computed, ComputedRef, reactive } from \"vue\";\n\ninterface IPaginationOptions {\n  page: number;\n  per_page: number;\n  count: number;\n  q?: string | ComputedRef<string>;\n  date?: number;\n}\n\ntype IUseLoadMore = (\n  paginationOptions: IPaginationOptions,\n  callback: () => Promise<void>\n) => {\n  pagination: IPaginationOptions;\n  isLastPage: ComputedRef<boolean>;\n  loadMore: () => Promise<void>;\n};\n\nconst useLoadMore: IUseLoadMore = (paginationOptions, callback) => {\n  const pagination = reactive(paginationOptions);\n\n  const isLastPage = computed(() => {\n    return pagination.page >= Math.ceil(pagination.count / pagination.per_page);\n  });\n\n  const loadMore = async () => {\n    await callback();\n    pagination.page++;\n  };\n\n  return {\n    pagination,\n    isLastPage,\n    loadMore,\n  };\n};\n\nexport default useLoadMore;\n","<template>\n  <div class=\"list\">\n    <slot name=\"header\"></slot>\n    <div class=\"list-body\">\n      <slot name=\"list\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"List\",\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"List\",\n});\n","import { render } from \"./index.vue?vue&type=template&id=31f1a623\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"load-more d-flex justify-content-center my-2\">\n    <template v-if=\"isLastPage\">\n      <small class=\"text-muted\" v-if=\"isLastPage\">已经到底啦~~~</small>\n    </template>\n\n    <template v-else>\n      <button class=\"btn btn-primary\" @click=\"loadMore\">加载更多</button>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"LoadMore\",\n  props: {\n    isLastPage: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  emits: [\"load-more\"],\n  setup(props, { emit }) {\n    const loadMore = () => {\n      emit(\"load-more\");\n    };\n\n    return {\n      loadMore,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"LoadMore\",\n  props: {\n    isLastPage: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  emits: [\"load-more\"],\n  setup(props, { emit }) {\n    const loadMore = () => {\n      emit(\"load-more\");\n    };\n\n    return {\n      loadMore,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=f904e412\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div :class=\"['tab', { 'd-flex': type === 'leftRight' }]\">\n    <slot name=\"menu\"> </slot>\n    <slot name=\"content\"> </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\n\ntype ITabType = \"topBottom\" | \"leftRight\";\n\nexport default defineComponent({\n  name: \"Tab\",\n  props: {\n    type: {\n      type: String as PropType<ITabType>,\n      default: \"topBottom\",\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n","\nimport { defineComponent, PropType } from \"vue\";\n\ntype ITabType = \"topBottom\" | \"leftRight\";\n\nexport default defineComponent({\n  name: \"Tab\",\n  props: {\n    type: {\n      type: String as PropType<ITabType>,\n      default: \"topBottom\",\n    },\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=723da21d\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ArticleTab.vue?vue&type=style&index=0&id=21d8d714&lang=scss&scoped=true\"","<template>\n  <Tab class=\"article-tab\">\n    <template v-slot:menu>\n      <div class=\"d-flex justify-content-between align-items-center mb-2\">\n        <div class=\"fw-bolder fs-5\">最新文章</div>\n        <ul class=\"nav nav-tabs article-tabs\">\n          <li class=\"nav-item\" v-for=\"tab of tabs\" :key=\"tab.type\">\n            <button\n              :class=\"['nav-link', { active: currentTab === tab.type }]\"\n              type=\"button\"\n              @click=\"changeTab(tab.type)\"\n            >\n              {{ tab.text }}\n            </button>\n          </li>\n        </ul>\n      </div>\n    </template>\n\n    <template v-slot:content>\n      <template v-for=\"(article, i) of articleList\" :key=\"article._id\">\n        <ArticleCard\n          :showImg=\"isUnderTag ? false : i === 0\"\n          :article=\"article\"\n          class=\"mb-3\"\n          @collect-article=\"collectTheArticle\"\n        ></ArticleCard>\n      </template>\n    </template>\n  </Tab>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from \"vue\";\nimport Tab from \"./index.vue\";\nimport ArticleCard from \"@/components/Card/ArticleCard.vue\";\nimport { IArticle, ITab } from \"@/typings\";\nimport useArticle from \"@/hooks/useArticle\";\n\nexport default defineComponent({\n  name: \"ArticleTab\",\n  components: {\n    Tab,\n    ArticleCard,\n  },\n  props: {\n    isUnderTag: {\n      type: Boolean,\n      default: false,\n    },\n    currentTab: {\n      type: String,\n      required: true,\n    },\n    tabs: {\n      type: Object as PropType<ITab[]>,\n      required: true,\n    },\n    articleList: {\n      type: Array as PropType<IArticle[]>,\n      required: true,\n    },\n  },\n  emits: [\"change-tab\"],\n  setup(props, { emit }) {\n    const { collectTheArticle } = useArticle();\n\n    const changeTab = (type: string) => {\n      if (props.currentTab === type) return;\n      emit(\"change-tab\", type);\n    };\n\n    return {\n      collectTheArticle,\n      changeTab,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.article-tabs {\n  border: none;\n\n  .nav-link {\n    padding-left: 0;\n    padding-right: 0;\n    padding-bottom: 0.2rem;\n    margin-left: 1rem;\n    border: none;\n    color: #000;\n\n    &.active {\n      border: none;\n      background-color: transparent;\n      color: $blue;\n      border-bottom: 3px solid $blue;\n      font-weight: bold;\n    }\n  }\n}\n</style>\n","\nimport { defineComponent, PropType } from \"vue\";\nimport Tab from \"./index.vue\";\nimport ArticleCard from \"@/components/Card/ArticleCard.vue\";\nimport { IArticle, ITab } from \"@/typings\";\nimport useArticle from \"@/hooks/useArticle\";\n\nexport default defineComponent({\n  name: \"ArticleTab\",\n  components: {\n    Tab,\n    ArticleCard,\n  },\n  props: {\n    isUnderTag: {\n      type: Boolean,\n      default: false,\n    },\n    currentTab: {\n      type: String,\n      required: true,\n    },\n    tabs: {\n      type: Object as PropType<ITab[]>,\n      required: true,\n    },\n    articleList: {\n      type: Array as PropType<IArticle[]>,\n      required: true,\n    },\n  },\n  emits: [\"change-tab\"],\n  setup(props, { emit }) {\n    const { collectTheArticle } = useArticle();\n\n    const changeTab = (type: string) => {\n      if (props.currentTab === type) return;\n      emit(\"change-tab\", type);\n    };\n\n    return {\n      collectTheArticle,\n      changeTab,\n    };\n  },\n});\n","import { render } from \"./ArticleTab.vue?vue&type=template&id=21d8d714&scoped=true\"\nimport script from \"./ArticleTab.vue?vue&type=script&lang=ts\"\nexport * from \"./ArticleTab.vue?vue&type=script&lang=ts\"\n\nimport \"./ArticleTab.vue?vue&type=style&index=0&id=21d8d714&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-21d8d714\"\n\nexport default script"],"sourceRoot":""}